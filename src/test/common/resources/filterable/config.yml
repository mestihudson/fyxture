# configurações gerais
common:
  # nome do padrão
  datasource: h2
  table:
    # informa onde os arquivos de fyxtures devem ser gerados
    # default: null
    auto: src/test/common/resources/filterable
    # sufixo dos arquivos .yml que contem as instancias das tabelas
    suffix: table
    # identificador das instâncias padrão das tabelas
    default: default
    # ordem em que as tabelas devem sofrer 'delete' durante clear()
    clear: [livro, autor]
  verify:
    excludes: [schema_version]

# lista de datasources que podem ser utilizados em init(...)
datasource:
  h2:
    dialect: h2
    schema: PUBLIC
    driver: org.h2.Driver
    url: jdbc:h2:target/fyxture
    user: sa
    password:
  oracle:
    dialect: oracle
    driver: oracle.jdbc.driver.OracleDriver
    url: jdbc:oracle:thin:@//fyxture:1521/xe
    user: fyxture
    password: fyxture
  sqlserver:
    dialect: sqlserver
    driver: net.sourceforge.jtds.jdbc.Driver
    url: jdbc:jtds:sqlserver://w7:1433/fyxture
    user: sa
    password: s3nh@
    # use aspas simples (') para forçar um candidato a número como string
    # password: '11111111'
    # use aspas simples (') para quotar strings que devem possuir aspas duplas no início e no fim
    # password: '"11111111"'
    # use aspas simples (") para quotar strings que devem possuir aspas simples no início e no fim
    # password: "'11111111'"
    # use '$' para não tratar o elemento seguinte como string, ou seja, não quotar a expressão
    # password: $newid()

sequence: [sq_id_livro, sq_id_autor]

table:
  livro:
    sequence:
      # sq_id_livro: id
      name: sq_id_livro
      column: id
  autor:
    sequence:
      # sq_id_autor: id
      name: sq_id_autor
      column: id

load:
  inicial: [autor, livro]
  outra-carga:
    autor: [default, segundo-autor, terceiro]
    livro: [festa-no-ceu]
    autor_livro: [default, segundo-autor, terceiro]

verify:
  todos:
    # verifica se todas as tabelas informadas como parametro do count tem resultado igual ao informado
    count(autor, livro): 1
    # verifica se todas as tabelas não informadas como parametro do count tem resultado igual ao informado
    count~(autor, livro): 0
